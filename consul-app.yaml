apiVersion: "2023-05-01"
location: "westeurope"
name: "consul"
properties:
  managedEnvironmentId: "/subscriptions/97761089-aedd-48cc-82a4-868666d706eb/resourceGroups/lcrg/providers/Microsoft.App/managedEnvironments/lcrg-env"
  configuration:
    ingress:
      external: true
      targetPort: 8500
  template:
    containers:
    - image: "lcrgacr.azurecr.io/consul:latest"
      name: "consul"
      command:
      - "/bin/sh"
      args:
      - "-c"
      - "consul agent -dev -client=0.0.0.0 -bind=0.0.0.0"
      resources:
        cpu: 0.5
        memory: "1.0Gi"
